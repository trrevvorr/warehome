(function(){var e={591:function(e,t,a){"use strict";var n=a(9242),i=a(3396);const o={id:"wrapper"},r={id:"root"};function s(e,t,a,n,s,l){const d=(0,i.up)("n-global-style"),u=(0,i.up)("app-header"),c=(0,i.up)("root-view"),m=(0,i.up)("app-footer"),p=(0,i.up)("n-loading-bar-provider"),g=(0,i.up)("n-message-provider"),h=(0,i.up)("n-dialog-provider"),f=(0,i.up)("n-config-provider");return(0,i.wg)(),(0,i.j4)(f,{theme:e.darkTheme},{default:(0,i.w5)((()=>[(0,i.Wm)(d),(0,i.Wm)(h,null,{default:(0,i.w5)((()=>[(0,i.Wm)(g,{placement:"bottom"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,null,{default:(0,i.w5)((()=>[(0,i._)("div",o,[(0,i.Wm)(u),(0,i._)("div",r,[(0,i.Wm)(c)]),(0,i.Wm)(m)])])),_:1})])),_:1})])),_:1})])),_:1},8,["theme"])}var l=a(7877),d=a(254),u=a(5727),c=a(3820),m=a(2185);function p(e,t,a,n,o,r){const s=(0,i.up)("router-view");return e.isLoadingStateSuccess||!e.isLoggedIn?((0,i.wg)(),(0,i.j4)(s,{key:0})):(0,i.kq)("",!0)}var g=a(65),h=a(8045),f=a(1260),w=a(4032),v=a(212),y=a(5393),I=(0,i.aZ)({data(){return{registration:null,updateExists:!1,refreshing:!1,message:{},messageReactive:{}}},created(){this.message=(0,f.U)(),document.addEventListener("swUpdated",this.updateAvailable,{once:!0}),navigator.serviceWorker.addEventListener("controllerchange",(()=>{this.refreshing||(this.refreshing=!0,window.location.reload())})),console.debug("LISTENING FOR UPDATE")},watch:{updateExists(e){e?this.messageReactive=this.message.info((()=>(0,i.h)(w.Z,{align:"center"},{default:()=>[(0,i.h)(v.Z,{strong:!0},{default:()=>"A new version is available"}),(0,i.h)(y.ZP,{strong:!0,tertiary:!0,size:"small",onClick:()=>{this.refreshApp()}},{default:()=>"Update"})]})),{closable:!0,duration:3e4}):this.messageReactive.destroy&&this.messageReactive.destroy()}},methods:{updateAvailable(e){console.debug("UPDATE AVAILABLE"),this.registration=e.detail,this.updateExists=!0},refreshApp(){console.debug("REFRESHING APP"),this.updateExists=!1,this.registration&&this.registration.waiting&&this.registration.waiting.postMessage({type:"SKIP_WAITING"})}}}),b=(0,i.aZ)({name:"RootView",mixins:[I],data(){return{loadingBar:{}}},watch:{isLoadingStateLoading(e){e&&this.loadingBar.start()},isLoadingStateSuccess(e){e&&this.loadingBar.finish()},isLoadingStateError(e){e&&this.loadingBar.error()}},created(){this.loadingBar=(0,h.K)(),this.isLoadingStateLoading&&this.loadingBar.start()},computed:{...(0,g.Se)(["location","isLoadingStateLoading","isLoadingStateError","isLoadingStateSuccess","isLoggedIn"])}}),S=a(89);const C=(0,S.Z)(b,[["render",p]]);var _=C,k=a(928),L=a(7139);const Z={id:"app-header"},U={class:"header-title"},A={class:"header-menu"};function D(e,t,a,n,o,r){const s=(0,i.up)("BoxMultipleSearch24Regular"),l=(0,i.up)("n-icon"),d=(0,i.up)("n-ellipsis"),u=(0,i.up)("MoreVertical20Filled"),c=(0,i.up)("n-button"),m=(0,i.up)("n-dropdown"),p=(0,i.up)("n-page-header");return(0,i.wg)(),(0,i.iD)("div",Z,[(0,i.Wm)(p,null,{avatar:(0,i.w5)((()=>[(0,i.Wm)(l,{size:"30",color:"#63e2b7"},{default:(0,i.w5)((()=>[(0,i.Wm)(s)])),_:1})])),title:(0,i.w5)((()=>[(0,i._)("div",U,[(0,i.Wm)(d,{"line-clamp":1},{default:(0,i.w5)((()=>[(0,i.Uk)((0,L.zw)(e.isLoggedIn?e.isLoadingStateSuccess?e.location.name:"Loading...":"WareHome"),1)])),_:1})])])),extra:(0,i.w5)((()=>[(0,i._)("div",A,[(0,i.Wm)(m,{trigger:"hover",options:e.options,onSelect:e.handleSelect},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{text:"",style:{"font-size":"25px"}},{default:(0,i.w5)((()=>[(0,i.Wm)(l,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u)])),_:1})])),_:1})])),_:1},8,["options","onSelect"])])])),_:1})])}var W=a(8042),R=a(5535),N=a(7713),T=a(9445),q=a(4524),P=a(7811),E=a(7125),F=a(8040),M=a(7051);const O=Object.freeze({Refresh:"refresh",Logout:"logout"});function x(e){return()=>(0,i.h)(W.g,null,{default:()=>(0,i.h)(e)})}var j=(0,i.aZ)({name:"RootView",components:{NButton:y.ZP,NEllipsis:R.Z,NIcon:W.g,NDropdown:N.Z,NPageHeader:T.Z,BoxMultipleSearch24Regular:q.Z,MoreVertical20Filled:P.Z},data(){return{loadingBar:()=>{},options:[{label:"Refresh",key:O.Refresh,icon:x(E.Z)},{label:"Log Out",key:O.Logout,icon:x(F.Z)}]}},computed:{...(0,g.Se)(["location","isLoadingStateLoading","isLoadingStateSuccess","isLoggedIn"])},methods:{...(0,g.OI)(["setLoadingStateLoading"]),...(0,g.nv)(["initDatastore"]),async reloadData(){await this.initDatastore()},async signOut(){try{await M.g.signOut()}catch(e){console.log("error signing out: ",e)}},handleSelect(e){switch(e){case O.Refresh:this.reloadData();break;case O.Logout:this.signOut();break}}}});const H=(0,S.Z)(j,[["render",D]]);var K=H;a(7658);const B={id:"app-footer"};function $(e,t,a,n,o,r){const s=(0,i.up)("Globe16Filled"),l=(0,i.up)("Globe16Regular"),d=(0,i.up)("n-icon"),u=(0,i.up)("n-button"),c=(0,i.up)("BoxMultiple24Filled"),m=(0,i.up)("BoxMultiple24Regular"),p=(0,i.up)("Shapes24Filled"),g=(0,i.up)("Shapes24Regular");return(0,i.wg)(),(0,i.iD)("div",B,[(0,i.Wm)(u,{quaternary:"",size:"large",onClick:t[0]||(t[0]=t=>e.$router.push({name:e.RouteNames.Locations})),type:e.isRouteActive(e.RouteNames.Locations)?"primary":"tertiary"},{icon:(0,i.w5)((()=>[(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[e.isRouteActive(e.RouteNames.Locations)?((0,i.wg)(),(0,i.j4)(s,{key:0})):((0,i.wg)(),(0,i.j4)(l,{key:1}))])),_:1})])),_:1},8,["type"]),(0,i.Wm)(u,{quaternary:"",size:"large",onClick:t[1]||(t[1]=t=>e.$router.push({name:e.RouteNames.Containers})),type:e.isRouteActive(e.RouteNames.Containers)?"primary":"tertiary"},{icon:(0,i.w5)((()=>[(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[e.isRouteActive(e.RouteNames.Containers)?((0,i.wg)(),(0,i.j4)(c,{key:0})):((0,i.wg)(),(0,i.j4)(m,{key:1}))])),_:1})])),_:1},8,["type"]),(0,i.Wm)(u,{quaternary:"",size:"large",onClick:t[2]||(t[2]=t=>e.$router.push({name:e.RouteNames.Items})),type:e.isRouteActive(e.RouteNames.Items)?"primary":"tertiary"},{icon:(0,i.w5)((()=>[(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[e.isRouteActive(e.RouteNames.Items)?((0,i.wg)(),(0,i.j4)(p,{key:0})):((0,i.wg)(),(0,i.j4)(g,{key:1}))])),_:1})])),_:1},8,["type"])])}var z=a(2738),G=a(9429),Y=a(1700),V=a(1140),X=a(6554),Q=a(1624),J=a(2483);const ee=e=>((0,i.dD)("data-v-17f94c74"),e=e(),(0,i.Cn)(),e),te={class:"header"},ae=ee((()=>(0,i._)("span",null,null,-1)));function ne(e,t,a,n,o,r){const s=(0,i.up)("n-text"),l=(0,i.up)("n-h2"),d=(0,i.up)("n-icon"),u=(0,i.up)("n-input"),c=(0,i.up)("Add16Filled"),m=(0,i.up)("n-button"),p=(0,i.up)("put-item-form"),g=(0,i.up)("n-modal"),h=(0,i.up)("item-table");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",te,[(0,i.Wm)(l,null,{default:(0,i.w5)((()=>[(0,i.Wm)(s,{type:"primary"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Items ")])),_:1})])),_:1}),ae,(0,i.Wm)(u,{value:e.query,"onUpdate:value":t[0]||(t[0]=t=>e.query=t),placeholder:"search items",clearable:""},{prefix:(0,i.w5)((()=>[(0,i.Wm)(d,{component:e.Search12Regular},null,8,["component"])])),_:1},8,["value"])]),(0,i.Wm)(m,{onClick:t[1]||(t[1]=t=>e.showModal=!0),class:"new-item-button",circle:"",type:"primary",size:"large"},{icon:(0,i.w5)((()=>[(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Wm)(c)])),_:1})])),_:1}),(0,i.Wm)(g,{show:e.showModal,"onUpdate:show":t[3]||(t[3]=t=>e.showModal=t),class:"modal"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{onFormSubmitted:t[2]||(t[2]=t=>e.showModal=!1),item:e.editItem},null,8,["item"])])),_:1},8,["show"]),(0,i.Wm)(h,{query:e.query,onEditItem:t[4]||(t[4]=t=>e.editItemId=t)},null,8,["query"])],64)}var ie=a(4870),oe=a(9522),re=a(3273),se=a(7646),le=a(6914),de=a(1727);const ue={class:"container-select"},ce={class:"recent-containers-wrapper-wrapper"},me={class:"recent-containers-wrapper"},pe={class:"recent-containers"};function ge(e,t,a,n,o,r){const s=(0,i.up)("n-tree-select"),l=(0,i.up)("Clock16Regular"),d=(0,i.up)("n-icon"),u=(0,i.up)("n-button"),c=(0,i.up)("n-space");return(0,i.wg)(),(0,i.iD)("div",ue,[(0,i.Wm)(c,{vertical:""},{default:(0,i.w5)((()=>[(0,i.Wm)(s,{filterable:"",options:e.options,clearable:"",value:e.value,"onUpdate:value":e.handleChange,disabled:e.disabled,"show-path":"","default-expanded-keys":e.defaultExpandedKeys},null,8,["options","value","onUpdate:value","disabled","default-expanded-keys"]),(0,i._)("div",ce,[(0,i.Wm)(d,{size:"25",class:"recent-icon"},{default:(0,i.w5)((()=>[(0,i.Wm)(l)])),_:1}),(0,i._)("div",me,[(0,i._)("div",pe,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.getRecentContainers(3,e.value),(t=>((0,i.wg)(),(0,i.j4)(u,{key:t.id,quaternary:"",onClick:a=>e.handleChange(t.id)},{default:(0,i.w5)((()=>[(0,i.Uk)((0,L.zw)(t.name),1)])),_:2},1032,["onClick"])))),128))])])])])),_:1})])}var he=a(7168),fe=a(2073),we=(0,i.aZ)({name:"ContainerSelect",components:{NTreeSelect:he.Z,NButton:y.ZP,NSpace:w.Z,NIcon:W.g,Clock16Regular:fe.Z},emits:["selectOption"],props:{value:{type:String,default:null},disabled:{type:Boolean,default:!1},selectLeafNodesOnly:{type:Boolean,default:!1}},data(){return{}},computed:{...(0,g.Se)(["containers","lastSelectedContainerId","getChildrenForContainer","getAncestorsForContainer","getRecentContainers"]),options(){const e=this.containers.filter((e=>null===e.parentContainerID));return this.containersOptionsRecursive(e)||[]},defaultExpandedKeys(){const e=this.value?this.containers.find((e=>e.id===this.value)):null;return e?this.getAncestorsForContainer(e).map((e=>e.id)):[]}},methods:{...(0,g.OI)(["addSelectedContainerId"]),containersOptionsRecursive(e){const t=e.map((e=>{const t=this.containersOptionsRecursive(this.getChildrenForContainer(e.id));return{label:e.name,key:e.id,children:t.length?t:void 0,disabled:this.selectLeafNodesOnly&&t&&t.length>0}}));return t},handleChange(e){this.addSelectedContainerId(e),this.$emit("selectOption",e)}}});const ve=(0,S.Z)(we,[["render",ge],["__scopeId","data-v-36b5d7fa"]]);var ye=ve,Ie=a(8978),be={__name:"PutItemForm",props:{item:Object},emits:["formSubmitted"],setup(e,{emit:t}){const a=e,n=(0,g.oR)(),o=(0,ie.iH)(!1),r=(0,ie.iH)(!1),s=(0,ie.iH)(!1),l=(0,Ie.R)(),d=(0,ie.iH)(null),u=(0,ie.iH)({name:a.item?.name||"",container:a.item?.containerID||""}),c=(0,i.Fl)((()=>!a.item)),m=(0,ie.iH)({name:{required:!0,trigger:"blur"},container:{required:!1,trigger:"blur"}});function p(e){e.preventDefault(),d.value?.validate((e=>{e?console.warn("errors",e):h()}))}async function h(){s.value=!0,await n.dispatch(c.value?"addItem":"updateItem",{id:a.item?.id,name:u.value.name.trim(),containerId:u.value.container||void 0}),c.value&&(u.value.name="",u.value.container=""),s.value=!1,o.value||t("formSubmitted")}function f(){l.error({title:"Confirm Delete",content:`Are you sure you want to delete ${a.item.name}?`,positiveText:"Delete",negativeText:"Cancel",onPositiveClick:()=>{v()},onNegativeClick:()=>{}})}async function v(){r.value=!0,await n.dispatch("deleteItem",a.item.id),r.value=!1,t("formSubmitted")}return(e,t)=>((0,i.wg)(),(0,i.j4)((0,ie.SU)(oe.ZP),{title:((0,ie.SU)(c)?"New":"Edit")+" Item",bordered:!1,role:"dialog","aria-modal":"true"},{default:(0,i.w5)((()=>[(0,i.Wm)((0,ie.SU)(re.Z),{ref_key:"formRef",ref:d,model:u.value,rules:m.value,disabled:r.value||s.value},{default:(0,i.w5)((()=>[(0,i.Wm)((0,ie.SU)(se.ZP),{label:"Name",path:"name"},{default:(0,i.w5)((()=>[(0,i.Wm)((0,ie.SU)(le.Z),{value:u.value.name,"onUpdate:value":t[0]||(t[0]=e=>u.value.name=e),placeholder:"Item Name"},null,8,["value"])])),_:1}),(0,i.Wm)((0,ie.SU)(se.ZP),{label:"Container",path:"container"},{default:(0,i.w5)((()=>[(0,i.Wm)(ye,{placeholder:"Container",value:u.value.container,onSelectOption:t[1]||(t[1]=e=>u.value.container=e),disabled:r.value||s.value},null,8,["value","disabled"])])),_:1}),(0,i.Wm)((0,ie.SU)(se.ZP),null,{default:(0,i.w5)((()=>[(0,i.Wm)((0,ie.SU)(w.Z),{align:"center"},{default:(0,i.w5)((()=>[(0,ie.SU)(c)?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)((0,ie.SU)(y.ZP),{key:0,loading:r.value,type:"error",onClick:f},{default:(0,i.w5)((()=>[(0,i.Uk)(" Delete ")])),_:1},8,["loading"])),(0,i.Wm)((0,ie.SU)(y.ZP),{loading:s.value,onClick:p,type:"primary"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Save ")])),_:1},8,["loading"]),(0,ie.SU)(c)?((0,i.wg)(),(0,i.j4)((0,ie.SU)(de.Z),{key:1,checked:o.value,"onUpdate:checked":t[2]||(t[2]=e=>o.value=e)},{default:(0,i.w5)((()=>[(0,i.Uk)(" Add More ")])),_:1},8,["checked"])):(0,i.kq)("",!0)])),_:1})])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title"]))}};const Se=be;var Ce=Se,_e=a(7647),ke=a(3722),Le=a(2329),Ze=a(5045);function Ue(e,t,a,n,o,r){const s=(0,i.up)("n-data-table");return(0,i.wg)(),(0,i.j4)(s,{columns:e.columns,data:e.itemsData,pagination:!1,bordered:!1},null,8,["columns","data"])}var Ae=a(6838),De=a(5861),We=(0,i.aZ)({name:"ItemTable",emits:["editItem"],components:{NDataTable:Ae.Z},props:{query:{type:String,default:""}},data(){return{columns:this.createColumns((e=>this.$emit("editItem",e)))}},computed:{...(0,g.Se)(["items","getAncestorStringForContainer","getContainerForItem"]),itemsData(){return this.items.filter((e=>e.name.toLowerCase().includes(this.query.toLowerCase()))).map((e=>{const t=this.getContainerForItem(e);return{name:e.name,container:t?[this.getAncestorStringForContainer(t),t.name].filter((e=>e)).join(" / "):void 0,id:e.id}}))}},methods:{createColumns(e){return[{title:"Name",key:"name",sorter:"default"},{title:"Container",key:"container",sorter:"default"},{title:"",key:"actions",render(t){return(0,i.h)(y.ZP,{quaternary:!0,onClick:()=>e(t.id)},{icon:()=>(0,i.h)(W.g,{},{default:()=>(0,i.h)(De.Z)})})}}]}}});const Re=(0,S.Z)(We,[["render",Ue]]);var Ne=Re,Te=(0,i.aZ)({name:"ItemForm",components:{PutItemForm:Ce,NModal:_e.Z,NIcon:W.g,NInput:le.Z,NButton:y.ZP,NH2:ke.kn,NText:v.Z,ItemTable:Ne,Add16Filled:Le.Z},data(){return{query:"",showModal:!1,editItemId:"",Search12Regular:(0,ie.Xl)(Ze.Z)}},watch:{showModal(e){e||(this.editItemId="")},editItem(e){e&&(this.showModal=!0)}},computed:{...(0,g.Se)(["items"]),editItem(){return this.editItemId?this.items.find((e=>e.id===this.editItemId)):null}},methods:{}});const qe=(0,S.Z)(Te,[["render",ne],["__scopeId","data-v-17f94c74"]]);var Pe=qe;const Ee=e=>((0,i.dD)("data-v-4a43d222"),e=e(),(0,i.Cn)(),e),Fe={class:"header"},Me=Ee((()=>(0,i._)("span",null,null,-1)));function Oe(e,t,a,n,o,r){const s=(0,i.up)("n-text"),l=(0,i.up)("n-h2"),d=(0,i.up)("n-icon"),u=(0,i.up)("n-input"),c=(0,i.up)("Add16Filled"),m=(0,i.up)("n-button"),p=(0,i.up)("put-container-form-wrapper"),g=(0,i.up)("n-modal"),h=(0,i.up)("container-table");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",Fe,[(0,i.Wm)(l,null,{default:(0,i.w5)((()=>[(0,i.Wm)(s,{type:"primary"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Containers ")])),_:1})])),_:1}),Me,(0,i.Wm)(u,{value:e.query,"onUpdate:value":t[0]||(t[0]=t=>e.query=t),placeholder:"search containers",clearable:""},{prefix:(0,i.w5)((()=>[(0,i.Wm)(d,{component:e.Search12Regular},null,8,["component"])])),_:1},8,["value"])]),(0,i.Wm)(m,{onClick:t[1]||(t[1]=t=>e.showModal=!0),class:"new-container-button",circle:"",type:"primary",size:"large"},{icon:(0,i.w5)((()=>[(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Wm)(c)])),_:1})])),_:1}),(0,i.Wm)(g,{show:e.showModal,"onUpdate:show":t[3]||(t[3]=t=>e.showModal=t),class:"modal"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{onFormSubmitted:t[2]||(t[2]=t=>e.showModal=!1),container:e.editContainer},null,8,["container"])])),_:1},8,["show"]),(0,i.Wm)(h,{query:e.query,onEditContainer:t[4]||(t[4]=t=>e.editContainerId=t)},null,8,["query"])],64)}var xe=a(4008),je=a(2695),He=a(3645);const Ke={key:0};var Be=(0,i.aZ)({__name:"PutContainerForm",props:{container:null},emits:["closeForm"],setup(e,{emit:t}){const a=e,n=(0,g.oR)(),o=(0,ie.iH)(!1),r=(0,ie.iH)(!1),s=(0,ie.iH)(!1),l=(0,Ie.R)(),d=(0,ie.iH)(null),u=(0,ie.iH)({name:a.container?.name||"",parent:a.container?.parentContainerID||""}),c=(0,i.Fl)((()=>!a.container)),m=(0,ie.iH)({name:{required:!0,trigger:"input",validator:(e,t)=>t?!t.includes("/")||Error("Cannot Include '/' character"):Error("Container name required")},parent:{required:!1,trigger:"blur"}});function p(e){e.preventDefault(),d.value&&d.value.validate((e=>{e?console.warn("errors",e):h()}))}async function h(){s.value=!0,await n.dispatch(c.value?"addContainer":"updateContainer",{id:a.container?.id,name:u.value.name,parentContainerId:u.value.parent||void 0}),c.value&&(u.value.name="",u.value.parent=""),s.value=!1,o.value||t("closeForm")}function f(){const e=n.getters.getChildrenForContainer(a.container.id).length>0;l.error({title:"Confirm Delete",content:`Are you sure you want to delete ${a.container.name}${e?" and ALL ITS CHILD CONTAINERS":""}?`,positiveText:e?"Delete All":"Delete",negativeText:"Cancel",onPositiveClick:()=>{v()},onNegativeClick:()=>{}})}async function v(){r.value=!0,await n.dispatch("deleteContainer",a.container.id),r.value=!1,t("closeForm")}return(e,t)=>((0,i.wg)(),(0,i.j4)((0,ie.SU)(re.Z),{ref_key:"formRef",ref:d,model:u.value,rules:m.value,disabled:r.value||s.value},{default:(0,i.w5)((()=>[(0,i.Wm)((0,ie.SU)(se.ZP),{label:"Name",path:"name"},{default:(0,i.w5)((()=>[(0,i.Wm)((0,ie.SU)(le.Z),{value:u.value.name,"onUpdate:value":t[0]||(t[0]=e=>u.value.name=e),placeholder:"Container Name"},null,8,["value"])])),_:1}),(0,i.Wm)((0,ie.SU)(se.ZP),{label:"Parent Container",path:"parent"},{default:(0,i.w5)((()=>[(0,i.Wm)(ye,{placeholder:"Parent Container",value:u.value.parent,onSelectOption:t[1]||(t[1]=e=>u.value.parent=e),disabled:r.value||s.value},null,8,["value","disabled"])])),_:1}),(0,i.Wm)((0,ie.SU)(se.ZP),null,{default:(0,i.w5)((()=>[(0,i.Wm)((0,ie.SU)(w.Z),{align:"center"},{default:(0,i.w5)((()=>[(0,ie.SU)(c)?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",Ke,[(0,ie.SU)(n).getters.isContainerDeleteAllowed(a.container.id)?((0,i.wg)(),(0,i.j4)((0,ie.SU)(y.ZP),{key:1,loading:r.value,type:"error",onClick:f},{default:(0,i.w5)((()=>[(0,i.Uk)(" Delete ")])),_:1},8,["loading"])):((0,i.wg)(),(0,i.j4)((0,ie.SU)(He.Z),{key:0},{trigger:(0,i.w5)((()=>[(0,i.Wm)((0,ie.SU)(y.ZP),{disabled:"",type:"error",tag:"div"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Delete ")])),_:1})])),default:(0,i.w5)((()=>[(0,i.Uk)(" Cannot delete container with items ")])),_:1}))])),(0,i.Wm)((0,ie.SU)(y.ZP),{loading:s.value,onClick:p,type:"primary"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Save ")])),_:1},8,["loading"]),(0,ie.SU)(c)?((0,i.wg)(),(0,i.j4)((0,ie.SU)(de.Z),{key:1,checked:o.value,"onUpdate:checked":t[2]||(t[2]=e=>o.value=e)},{default:(0,i.w5)((()=>[(0,i.Uk)(" Add More ")])),_:1},8,["checked"])):(0,i.kq)("",!0)])),_:1})])),_:1})])),_:1},8,["model","rules","disabled"]))}});const $e=Be;var ze=$e,Ge=a(3865);const Ye=(0,i._)("legend",null,"Name",-1),Ve={class:"name-input"},Xe={class:"name-preview"},Qe=(0,i._)("span",null,"Preview",-1),Je={class:"preview-items"},et=(0,i._)("br",null,null,-1);var tt=(0,i.aZ)({__name:"BatchCreateContainerForm",emits:["closeForm"],setup(e,{emit:t}){const a=(0,g.oR)(),n=(0,ie.iH)(!1),o=(0,ie.iH)(!1),r=(0,ie.iH)(null),s=(0,ie.iH)({prefix:"",suffix:"",range:["",""],parent:""}),l=e=>!e||/^\d+$/.test(e),d=(0,i.Fl)((()=>{try{c(s.value.range);const e=[],t=parseInt(s.value.range[0]),a=parseInt(s.value.range[1]);for(let n=t;n<=a;n++)e.push(s.value.prefix+n+s.value.suffix);return e}catch(e){return[]}})),u=(0,ie.iH)({prefix:{required:!1,trigger:"input",validator:(e,t)=>!t.includes("/")||Error("Cannot Include '/' character")},suffix:{required:!1,trigger:"input",validator:(e,t)=>!t.includes("/")||Error("Cannot Include '/' character")},range:{required:!0,trigger:"input",validator:(e,t)=>c(t)},parent:{required:!0,trigger:"blur"}});function c(e){if(""===e[0]||""===e[1])return Error("Range is required");const t=parseInt(e[0]),a=parseInt(e[1]);return t>a?Error("Range is invalid"):!(a-t>=100)||Error("Limited to 100 at a time")}function m(e){e.preventDefault(),r.value&&r.value.validate((e=>{e?console.warn("errors",e):p()}))}async function p(){o.value=!0,await Promise.allSettled(d.value.map((e=>a.dispatch("addContainer",{name:e,parentContainerId:s.value.parent||void 0})))),s.value.prefix="",s.value.suffix="",s.value.range=["",""],s.value.parent="",o.value=!1,n.value||t("closeForm")}return(e,t)=>((0,i.wg)(),(0,i.j4)((0,ie.SU)(re.Z),{ref_key:"formRef",ref:r,model:s.value,rules:u.value,id:"batch-create-container-form",disabled:o.value},{default:(0,i.w5)((()=>[(0,i._)("fieldset",null,[Ye,(0,i._)("div",Ve,[(0,i.Wm)((0,ie.SU)(se.ZP),{label:"Prefix",path:"preix"},{default:(0,i.w5)((()=>[(0,i.Wm)((0,ie.SU)(le.Z),{value:s.value.prefix,"onUpdate:value":t[0]||(t[0]=e=>s.value.prefix=e),placeholder:"Prefix"},null,8,["value"])])),_:1}),(0,i.Wm)((0,ie.SU)(se.ZP),{label:"Range",path:"range"},{default:(0,i.w5)((()=>[(0,i.Wm)((0,ie.SU)(le.Z),{class:"range-input",pair:"",separator:"â†’","allow-input":l,placeholder:["1","3"],value:s.value.range,"onUpdate:value":t[1]||(t[1]=e=>s.value.range=e),"input-props":{type:"number"}},null,8,["value"])])),_:1}),(0,i.Wm)((0,ie.SU)(se.ZP),{label:"Suffix",path:"suffix"},{default:(0,i.w5)((()=>[(0,i.Wm)((0,ie.SU)(le.Z),{value:s.value.suffix,"onUpdate:value":t[2]||(t[2]=e=>s.value.suffix=e),placeholder:"Suffix"},null,8,["value"])])),_:1})]),(0,i._)("div",Xe,[Qe,(0,i._)("div",Je,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,ie.SU)(d).slice(0,3),(e=>((0,i.wg)(),(0,i.j4)((0,ie.SU)(Ge.ZP),{bordered:!1,class:"preview-item",key:e},{default:(0,i.w5)((()=>[(0,i.Uk)((0,L.zw)(e),1)])),_:2},1024)))),128)),(0,ie.SU)(d).length>3?((0,i.wg)(),(0,i.j4)((0,ie.SU)(Ge.ZP),{key:0,bordered:!1,class:"preview-item"},{default:(0,i.w5)((()=>[(0,i.Uk)("...")])),_:1})):(0,i.kq)("",!0),0===(0,ie.SU)(d).length?((0,i.wg)(),(0,i.j4)((0,ie.SU)(v.Z),{key:1,depth:"3"},{default:(0,i.w5)((()=>[(0,i.Uk)("No names to preview")])),_:1})):(0,i.kq)("",!0)])])]),et,(0,i.Wm)((0,ie.SU)(se.ZP),{label:"Parent Container",path:"parent"},{default:(0,i.w5)((()=>[(0,i.Wm)(ye,{placeholder:"Parent Container",value:s.value.parent,onSelectOption:t[3]||(t[3]=e=>s.value.parent=e),disabled:o.value},null,8,["value","disabled"])])),_:1}),(0,i.Wm)((0,ie.SU)(se.ZP),null,{default:(0,i.w5)((()=>[(0,i.Wm)((0,ie.SU)(w.Z),{align:"center"},{default:(0,i.w5)((()=>[(0,i.Wm)((0,ie.SU)(y.ZP),{loading:o.value,onClick:m,type:"primary"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Save ")])),_:1},8,["loading"]),(0,i.Wm)((0,ie.SU)(de.Z),{checked:n.value,"onUpdate:checked":t[4]||(t[4]=e=>n.value=e)},{default:(0,i.w5)((()=>[(0,i.Uk)(" Add More ")])),_:1},8,["checked"])])),_:1})])),_:1})])),_:1},8,["model","rules","disabled"]))}});const at=tt;var nt=at,it=(0,i.aZ)({__name:"PutContainerFormWrapper",props:{container:null},emits:["formSubmitted"],setup(e,{emit:t}){const a=e,o=(0,i.Fl)((()=>!a.container));function r(){t("formSubmitted")}return(t,a)=>((0,i.wg)(),(0,i.j4)((0,ie.SU)(oe.ZP),{title:((0,ie.SU)(o)?"New":"Edit")+" Container",bordered:!1,role:"dialog","aria-modal":"true"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)((0,ie.SU)(xe.Z),{type:"line",animated:""},{default:(0,i.w5)((()=>[(0,i.Wm)((0,ie.SU)(je.Z),{name:"single",tab:"Single","display-directive":"show"},{default:(0,i.w5)((()=>[(0,i.Wm)(ze,{container:e.container,onCloseForm:r},null,8,["container"])])),_:1}),(0,i.Wm)((0,ie.SU)(je.Z),{name:"multiple",tab:"Multiple","display-directive":"show"},{default:(0,i.w5)((()=>[(0,i.Wm)(nt,{container:e.container,onCloseForm:r},null,8,["container"])])),_:1})])),_:1},512),[[n.F8,(0,ie.SU)(o)]]),(0,i.wy)((0,i.Wm)(ze,{container:e.container,onCloseForm:r},null,8,["container"]),[[n.F8,!(0,ie.SU)(o)]])])),_:1},8,["title"]))}});const ot=it;var rt=ot;function st(e,t,a,n,o,r){const s=(0,i.up)("n-data-table"),l=(0,i.up)("items-list"),d=(0,i.up)("n-modal");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(s,{columns:e.columns,data:e.containersData,pagination:!1,bordered:!1,"default-expand-all":e.containersData.length<2||e.containers.length<10},null,8,["columns","data","default-expand-all"]),(0,i.Wm)(d,{show:e.showItemsModal,"onUpdate:show":t[0]||(t[0]=t=>e.showItemsModal=t),class:"modal"},{default:(0,i.w5)((()=>[(0,i.Wm)(l,{containerId:e.itemsModalContainerId},null,8,["containerId"])])),_:1},8,["show"])],64)}const lt={key:0,class:"items-list"},dt={key:0,class:"items-list"};function ut(e,t,a,n,o,r){const s=(0,i.up)("n-thing"),l=(0,i.up)("n-list-item"),d=(0,i.up)("n-empty"),u=(0,i.up)("n-text"),c=(0,i.up)("n-list"),m=(0,i.up)("n-tab-pane"),p=(0,i.up)("n-tabs"),g=(0,i.up)("n-card");return e.containerId?((0,i.wg)(),(0,i.j4)(g,{key:0,title:`Items in ${e.container.name}`,bordered:!1,role:"dialog","aria-modal":"true"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{type:"line",animated:""},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{name:"all",tab:`All Items (${[...e.itemsInContainer,...e.itemsInDescendants].length})`},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{"show-divider":!1},{footer:(0,i.w5)((()=>[(0,i.Wm)(u,{class:"list-description",depth:"3"},{default:(0,i.w5)((()=>[(0,i.Uk)("Displaying items in "+(0,L.zw)(e.container.name)+" and its descendant containers",1)])),_:1})])),default:(0,i.w5)((()=>[[...e.itemsInContainer,...e.itemsInDescendants].length?((0,i.wg)(),(0,i.iD)("div",lt,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)([...e.itemsInContainer,...e.itemsInDescendants],(e=>((0,i.wg)(),(0,i.j4)(l,{key:e.id},{default:(0,i.w5)((()=>[(0,i.Wm)(s,{title:e.name},null,8,["title"])])),_:2},1024)))),128))])):((0,i.wg)(),(0,i.j4)(d,{key:1,description:"No Items"}))])),_:1})])),_:1},8,["tab"]),(0,i.Wm)(m,{name:"container",tab:`Direct Items Only (${e.itemsInContainer.length})`},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{"show-divider":!1},{footer:(0,i.w5)((()=>[(0,i.Wm)(u,{class:"list-description",depth:"3"},{default:(0,i.w5)((()=>[(0,i.Uk)("Displaying items directly in "+(0,L.zw)(e.container.name)+" container ",1)])),_:1})])),default:(0,i.w5)((()=>[e.itemsInContainer.length?((0,i.wg)(),(0,i.iD)("div",dt,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.itemsInContainer,(e=>((0,i.wg)(),(0,i.j4)(l,{key:e.id},{default:(0,i.w5)((()=>[(0,i.Wm)(s,{title:e.name},null,8,["title"])])),_:2},1024)))),128))])):((0,i.wg)(),(0,i.j4)(d,{key:1,description:"No Items"}))])),_:1})])),_:1},8,["tab"])])),_:1})])),_:1},8,["title"])):(0,i.kq)("",!0)}var ct=a(6973),mt=a(568),pt=a(7602),gt=a(1193),ht=(0,i.aZ)({name:"ItemsList",components:{NCard:oe.ZP,NEmpty:ct.Z,NList:mt.ZP,NListItem:pt.Z,NThing:gt.Z,NText:v.Z,NTabs:xe.Z,NTabPane:je.Z},props:{containerId:{type:String,required:!1}},data(){return{}},computed:{...(0,g.Se)(["getDescendantsForContainer","getItemsForContainer","containers","getChildrenForContainer"]),container(){return console.log("containerId",this.containerId),this.containerId&&this.containers.find((e=>e.id===this.containerId))},itemsInContainer(){return this.containerId&&this.getItemsForContainer(this.containerId)},childContainers(){return this.getChildrenForContainer(this.containerId)},itemsInDescendants(){return this.containerId&&this.getDescendantsForContainer(this.containerId).flatMap((e=>this.getItemsForContainer(e.id)))}}});const ft=(0,S.Z)(ht,[["render",ut],["__scopeId","data-v-5caf7947"]]);var wt=ft,vt=(0,i.aZ)({name:"ContainerTable",emits:["editContainer"],components:{NDataTable:Ae.Z,NModal:_e.Z,ItemsList:wt},props:{query:{type:String,default:""}},data(){return{itemsModalContainerId:"",columns:this.createColumns((e=>this.$emit("editContainer",e)),this.setItemModalContainerId),showItemsModal:!1}},watch:{showItemsModal(e){e||(this.itemsModalContainerId="")},itemsModalContainerId(e){this.showItemsModal=!!e}},computed:{...(0,g.Se)(["containers","items","getChildrenForContainer","getDescendantsForContainer","getItemsForContainer"]),containersData(){return this.containers.filter((e=>!e.parentContainerID)).map((e=>this.containerDataRecursive(e))).filter((e=>e))}},methods:{containerDataRecursive(e){const t=e.name.toLowerCase().includes(this.query.toLowerCase());if(t){const t=this.getChildrenForContainer(e.id).map((e=>this.containerDataRecursive(e))).filter((e=>e)),a=this.items.filter((t=>t.containerID===e.id)).length,n=this.getDescendantsForContainer(e.id).flatMap((e=>this.getItemsForContainer(e.id))).length;return{name:e.name,id:e.id,key:e.id,itemsCount:`${a}${t.length?" / "+(a+n):""}`,children:t}}return null},createColumns(e,t){return[{title:"Name",key:"name"},{title:"Items",key:"items",render(e){return(0,i.h)(y.ZP,{quaternary:!0,onClick:()=>t(e.id)},{default:()=>e.itemsCount})}},{title:"Edit",key:"actions",render(t){return(0,i.h)(y.ZP,{quaternary:!0,onClick:()=>e(t.id)},{icon:()=>(0,i.h)(W.g,{},{default:()=>(0,i.h)(De.Z)})})}}]},setItemModalContainerId(e){this.itemsModalContainerId=e}}});const yt=(0,S.Z)(vt,[["render",st],["__scopeId","data-v-6fc9d1bf"]]);var It=yt,bt=(0,i.aZ)({name:"ContainerForm",components:{PutContainerFormWrapper:rt,NModal:_e.Z,NIcon:W.g,NInput:le.Z,NButton:y.ZP,NH2:ke.kn,NText:v.Z,ContainerTable:It,Add16Filled:Le.Z},data(){return{query:"",showModal:!1,editContainerId:"",Search12Regular:(0,ie.Xl)(Ze.Z)}},watch:{showModal(e){e||(this.editContainerId="")},editContainer(e){e&&(this.showModal=!0)}},computed:{...(0,g.Se)(["containers"]),filteredContainers(){return this.containers.filter((e=>e.name.toLowerCase().includes(this.query.toLowerCase())))},editContainer(){return this.editContainerId?this.containers.find((e=>e.id===this.editContainerId)):null}},methods:{...(0,g.nv)(["addContainer","deleteContainer"])}});const St=(0,S.Z)(bt,[["render",Oe],["__scopeId","data-v-4a43d222"]]);var Ct=St;const _t=e=>((0,i.dD)("data-v-dd473c08"),e=e(),(0,i.Cn)(),e),kt={class:"header"},Lt=_t((()=>(0,i._)("span",null,null,-1)));function Zt(e,t,a,n,o,r){const s=(0,i.up)("n-text"),l=(0,i.up)("n-h2"),d=(0,i.up)("n-icon"),u=(0,i.up)("n-input"),c=(0,i.up)("Add16Filled"),m=(0,i.up)("n-button"),p=(0,i.up)("put-location-form"),g=(0,i.up)("n-modal"),h=(0,i.up)("location-table");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",kt,[(0,i.Wm)(l,null,{default:(0,i.w5)((()=>[(0,i.Wm)(s,{type:"primary"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Locations ")])),_:1})])),_:1}),Lt,(0,i.Wm)(u,{value:e.query,"onUpdate:value":t[0]||(t[0]=t=>e.query=t),placeholder:"search locations",clearable:""},{prefix:(0,i.w5)((()=>[(0,i.Wm)(d,{component:e.Search12Regular},null,8,["component"])])),_:1},8,["value"])]),(0,i.Wm)(m,{onClick:t[1]||(t[1]=t=>e.showModal=!0),class:"new-location-button",circle:"",type:"primary",size:"large"},{icon:(0,i.w5)((()=>[(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Wm)(c)])),_:1})])),_:1}),(0,i.Wm)(g,{show:e.showModal,"onUpdate:show":t[3]||(t[3]=t=>e.showModal=t),class:"modal"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{onFormSubmitted:t[2]||(t[2]=t=>e.showModal=!1),location:e.editLocation},null,8,["location"])])),_:1},8,["show"]),(0,i.Wm)(h,{query:e.query,onEditLocation:t[4]||(t[4]=t=>e.editLocationId=t),onActivateLocation:e.changeLocation},null,8,["query","onActivateLocation"])],64)}var Ut={__name:"PutLocationForm",props:{location:Object},emits:["formSubmitted"],setup(e,{emit:t}){const a=e,n=(0,g.oR)(),o=(0,ie.iH)(!1),r=(0,ie.iH)(!1),s=(0,ie.iH)(null),l=(0,ie.iH)({name:a.location?.name||""}),d=(0,i.Fl)((()=>!a.location)),u=(0,ie.iH)({name:{required:!0,trigger:"blur"}});function c(e){e.preventDefault(),s.value?.validate((e=>{e?console.warn("errors",e):m()}))}async function m(){r.value=!0,await n.dispatch(d.value?"addLocation":"updateLocation",{id:a.location?.id,name:l.value.name.trim()}),d.value&&(l.value.name=""),r.value=!1,o.value||t("formSubmitted")}return(e,t)=>((0,i.wg)(),(0,i.j4)((0,ie.SU)(oe.ZP),{title:((0,ie.SU)(d)?"New":"Edit")+" Location",bordered:!1,role:"dialog","aria-modal":"true"},{default:(0,i.w5)((()=>[(0,i.Wm)((0,ie.SU)(re.Z),{ref_key:"formRef",ref:s,model:l.value,rules:u.value,disabled:r.value},{default:(0,i.w5)((()=>[(0,i.Wm)((0,ie.SU)(se.ZP),{label:"Name",path:"name"},{default:(0,i.w5)((()=>[(0,i.Wm)((0,ie.SU)(le.Z),{value:l.value.name,"onUpdate:value":t[0]||(t[0]=e=>l.value.name=e),placeholder:"Location Name"},null,8,["value"])])),_:1}),(0,i.Wm)((0,ie.SU)(se.ZP),null,{default:(0,i.w5)((()=>[(0,i.Wm)((0,ie.SU)(w.Z),{align:"center"},{default:(0,i.w5)((()=>[(0,i.Wm)((0,ie.SU)(y.ZP),{loading:r.value,onClick:c,type:"primary"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Save ")])),_:1},8,["loading"]),(0,ie.SU)(d)?((0,i.wg)(),(0,i.j4)((0,ie.SU)(de.Z),{key:0,checked:o.value,"onUpdate:checked":t[1]||(t[1]=e=>o.value=e)},{default:(0,i.w5)((()=>[(0,i.Uk)(" Add More ")])),_:1},8,["checked"])):(0,i.kq)("",!0)])),_:1})])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title"]))}};const At=Ut;var Dt=At;function Wt(e,t,a,n,o,r){const s=(0,i.up)("n-data-table");return(0,i.wg)(),(0,i.j4)(s,{columns:e.columns,data:e.locationsData,pagination:!1,bordered:!1},null,8,["columns","data"])}var Rt=a(9480),Nt=a(4619),Tt=(0,i.aZ)({name:"LocationTable",emits:["editLocation","activateLocation"],components:{NDataTable:Ae.Z},props:{query:{type:String,default:""}},data(){return{columns:[]}},created(){this.columns=this.createColumns((e=>this.$emit("editLocation",e)),(e=>this.$emit("activateLocation",e)),(e=>e===this.location?.id))},computed:{...(0,g.Se)(["locations","location"]),locationsData(){return this.locations.filter((e=>e.name.toLowerCase().includes(this.query.toLowerCase()))).map((e=>({name:e.name,id:e.id})))}},methods:{createColumns(e,t,a){return[{title:"Name",key:"name",sorter:"default"},{title:"Actions",key:"actions",render(n){return(0,i.h)(w.Z,{},{default:()=>[(0,i.h)(y.ZP,{quaternary:!0,onClick:()=>e(n.id)},{icon:()=>(0,i.h)(W.g,{},{default:()=>(0,i.h)(De.Z)})}),(0,i.h)(y.ZP,{quaternary:!0,onClick:()=>t(n.id),disabled:a(n.id),type:"warning"},{icon:()=>(0,i.h)(W.g,{},{default:()=>(0,i.h)(a(n.id)?Rt.Z:Nt.Z)})})]})}}]}}});const qt=(0,S.Z)(Tt,[["render",Wt]]);var Pt=qt,Et=(0,i.aZ)({name:"LocationForm",components:{PutLocationForm:Dt,NModal:_e.Z,NIcon:W.g,NInput:le.Z,NButton:y.ZP,NH2:ke.kn,NText:v.Z,LocationTable:Pt,Add16Filled:Le.Z},data(){return{query:"",showModal:!1,editLocationId:"",Search12Regular:(0,ie.Xl)(Ze.Z)}},watch:{showModal(e){e||(this.editLocationId="")},editLocation(e){e&&(this.showModal=!0)}},computed:{...(0,g.Se)(["locations","location"]),editLocation(){return this.editLocationId?this.locations.find((e=>e.id===this.editLocationId)):null}},methods:{...(0,g.nv)(["changeLocation"])}});const Ft=(0,S.Z)(Et,[["render",Zt],["__scopeId","data-v-dd473c08"]]);var Mt=Ft,Ot=a(7064),xt=a(7429);const jt={aws_project_region:"us-east-2",aws_appsync_graphqlEndpoint:"https://3ke4dmavgze5rb5dcawae6cnl4.appsync-api.us-east-2.amazonaws.com/graphql",aws_appsync_region:"us-east-2",aws_appsync_authenticationType:"AMAZON_COGNITO_USER_POOLS",aws_cognito_identity_pool_id:"us-east-2:103be435-540b-4a12-8eac-f2335f80dac8",aws_cognito_region:"us-east-2",aws_user_pools_id:"us-east-2_zbLoLKPFd",aws_user_pools_web_client_id:"40sef3hkf7547efp1gmbrgr0t1",oauth:{},aws_cognito_username_attributes:["EMAIL"],aws_cognito_social_providers:[],aws_cognito_signup_attributes:["NAME"],aws_cognito_mfa_configuration:"OFF",aws_cognito_mfa_types:["SMS"],aws_cognito_password_protection_settings:{passwordPolicyMinLength:8,passwordPolicyCharacters:["REQUIRES_LOWERCASE","REQUIRES_NUMBERS","REQUIRES_SYMBOLS","REQUIRES_UPPERCASE"]},aws_cognito_verification_mechanisms:["EMAIL"]};var Ht=jt;const Kt=["onClick"];var Bt={__name:"LoginSignUp",setup(e){return xt.d.configure(Ht),(e,t)=>((0,i.wg)(),(0,i.j4)((0,ie.SU)(Ot._F),null,{default:(0,i.w5)((({user:e,signOut:t})=>[(0,i._)("h1",null,"Hello "+(0,L.zw)(e.username)+"!",1),(0,i._)("button",{onClick:t},"Sign Out",8,Kt)])),_:1}))}};const $t=Bt;var zt,Gt=$t;(function(e){e["Login"]="login",e["Items"]="items",e["Containers"]="containers",e["Locations"]="locations"})(zt||(zt={}));const Yt=[{path:"/",redirect:()=>"/items"},{path:"/login",name:zt.Login,component:Gt},{path:"/items",name:zt.Items,component:Pe},{path:"/containers",name:zt.Containers,component:Ct},{path:"/locations",name:zt.Locations,component:Mt}],Vt=(0,J.p7)({history:(0,J.r5)(),routes:Yt});async function Xt(){try{return await M.g.currentAuthenticatedUser(),!0}catch{return console.warn("User is not authenticated"),!1}}Vt.beforeEach((async(e,t)=>{if(!await Xt()&&e.name!==zt.Login)return{name:zt.Login}}));var Qt=Vt,Jt=(0,i.aZ)({name:"RootView",components:{NButton:y.ZP,NIcon:W.g,BoxMultiple24Regular:z.Z,BoxMultiple24Filled:G.Z,Shapes24Regular:Y.Z,Shapes24Filled:V.Z,Globe16Regular:X.Z,Globe16Filled:Q.Z},data(){return{RouteNames:zt}},computed:{...(0,g.Se)(["isLoggedIn"])},methods:{isRouteActive(e){return this.$route.name?.toString()===e}}});const ea=(0,S.Z)(Jt,[["render",$]]);var ta=ea,aa=(0,i.aZ)({name:"App",components:{NLoadingBarProvider:l.Z,NConfigProvider:d.Z,NDialogProvider:u.J,NMessageProvider:c.Z,NGlobalStyle:m.Z,RootView:_,AppHeader:K,AppFooter:ta},data:()=>({listener:()=>{},darkTheme:k.$}),created(){this.initUser()},methods:{...(0,g.nv)(["initUser"])}});const na=(0,S.Z)(aa,[["render",s]]);var ia=na,oa=a(6897);const ra={models:{Item:{name:"Item",fields:{id:{name:"id",isArray:!1,type:"ID",isRequired:!0,attributes:[]},name:{name:"name",isArray:!1,type:"String",isRequired:!0,attributes:[]},locationID:{name:"locationID",isArray:!1,type:"ID",isRequired:!0,attributes:[]},containerID:{name:"containerID",isArray:!1,type:"ID",isRequired:!1,attributes:[]},createdAt:{name:"createdAt",isArray:!1,type:"AWSDateTime",isRequired:!1,attributes:[],isReadOnly:!0},updatedAt:{name:"updatedAt",isArray:!1,type:"AWSDateTime",isRequired:!1,attributes:[],isReadOnly:!0}},syncable:!0,pluralName:"Items",attributes:[{type:"model",properties:{}},{type:"key",properties:{name:"byLocation",fields:["locationID"]}},{type:"key",properties:{name:"byContainer",fields:["containerID"]}},{type:"auth",properties:{rules:[{provider:"userPools",ownerField:"owner",allow:"owner",identityClaim:"cognito:username",operations:["create","update","delete","read"]},{allow:"private",operations:["create","update","delete","read"]}]}}]},Container:{name:"Container",fields:{id:{name:"id",isArray:!1,type:"ID",isRequired:!0,attributes:[]},name:{name:"name",isArray:!1,type:"String",isRequired:!0,attributes:[]},Items:{name:"Items",isArray:!0,type:{model:"Item"},isRequired:!1,attributes:[],isArrayNullable:!0,association:{connectionType:"HAS_MANY",associatedWith:["containerID"]}},locationID:{name:"locationID",isArray:!1,type:"ID",isRequired:!0,attributes:[]},parentContainerID:{name:"parentContainerID",isArray:!1,type:"ID",isRequired:!1,attributes:[]},Containers:{name:"Containers",isArray:!0,type:{model:"Container"},isRequired:!1,attributes:[],isArrayNullable:!0,association:{connectionType:"HAS_MANY",associatedWith:["parentContainerID"]}},createdAt:{name:"createdAt",isArray:!1,type:"AWSDateTime",isRequired:!1,attributes:[],isReadOnly:!0},updatedAt:{name:"updatedAt",isArray:!1,type:"AWSDateTime",isRequired:!1,attributes:[],isReadOnly:!0}},syncable:!0,pluralName:"Containers",attributes:[{type:"model",properties:{}},{type:"key",properties:{name:"byLocation",fields:["locationID"]}},{type:"key",properties:{name:"byParentContainer",fields:["parentContainerID"]}},{type:"auth",properties:{rules:[{provider:"userPools",ownerField:"owner",allow:"owner",identityClaim:"cognito:username",operations:["create","update","delete","read"]},{allow:"private",operations:["create","update","delete","read"]}]}}]},Location:{name:"Location",fields:{id:{name:"id",isArray:!1,type:"ID",isRequired:!0,attributes:[]},name:{name:"name",isArray:!1,type:"String",isRequired:!0,attributes:[]},Containers:{name:"Containers",isArray:!0,type:{model:"Container"},isRequired:!1,attributes:[],isArrayNullable:!0,association:{connectionType:"HAS_MANY",associatedWith:["locationID"]}},Items:{name:"Items",isArray:!0,type:{model:"Item"},isRequired:!1,attributes:[],isArrayNullable:!0,association:{connectionType:"HAS_MANY",associatedWith:["locationID"]}},createdAt:{name:"createdAt",isArray:!1,type:"AWSDateTime",isRequired:!1,attributes:[],isReadOnly:!0},updatedAt:{name:"updatedAt",isArray:!1,type:"AWSDateTime",isRequired:!1,attributes:[],isReadOnly:!0}},syncable:!0,pluralName:"Locations",attributes:[{type:"model",properties:{}},{type:"auth",properties:{rules:[{provider:"userPools",ownerField:"owner",allow:"owner",identityClaim:"cognito:username",operations:["create","update","delete","read"]}]}}]}},enums:{},nonModels:{},codegenVersion:"3.3.2",version:"2da9b5b6680e5642421c6084b89d504b"},{Item:sa,Container:la,Location:da}=(0,oa.yb)(ra);var ua=a(1868);const ca="local_storage_location_key";var ma;(function(e){e["LOADING"]="loading",e["SUCCESS"]="success",e["ERROR"]="error",e["NOT_BEGUN"]="not_begun"})(ma||(ma={}));let pa=()=>{};const ga={user:null,activeLocationId:localStorage.getItem(ca)||"",locations:[],locationSubscription:null,containers:[],containerSubscription:null,items:[],itemSubscription:null,selectedContainerIds:{},loadingState:ma.NOT_BEGUN};var ha=(0,g.MT)({state:Object.assign({},ga),getters:{isLoggedIn:e=>!!e.user,containers:e=>e.containers,items:e=>e.items,locations:e=>e.locations,location:e=>e.locations.find((t=>t.id===e.activeLocationId)),getChildrenForContainer:e=>t=>wa(e,t,!0),getAncestorsForContainer:e=>t=>ya(t,e.containers),getAncestorStringForContainer:e=>t=>ya(t,e.containers).map((e=>e.name)).join(" / "),getDescendantsForContainer:e=>t=>va(t,e.containers),getContainerForItem:e=>t=>e.containers.find((e=>e.id===t.containerID)),getItemsForContainer:e=>t=>e.items.filter((e=>e.containerID===t)),isLoadingStateNotBegun:e=>e.loadingState===ma.NOT_BEGUN,isLoadingStateLoading:e=>e.loadingState===ma.LOADING,isLoadingStateSuccess:e=>e.loadingState===ma.SUCCESS,isLoadingStateError:e=>e.loadingState===ma.ERROR,getRecentContainers:e=>(t,a)=>{const n=e.containers.map((e=>({containerId:e.id,updatedAt:e.updatedAt}))),i=e.items.map((e=>({containerId:e.containerID,updatedAt:e.updatedAt}))),o=Object.keys(e.selectedContainerIds).map((t=>({containerId:t,updatedAt:e.selectedContainerIds[t]})));return[...new Set([...n,...i,...o].sort(((e,t)=>e.updatedAt&&t.updatedAt?e.updatedAt.localeCompare(t.updatedAt):0)).map((e=>e.containerId)).reverse())].filter((e=>e!==a)).slice(0,t).map((t=>e.containers.find((e=>e.id===t)))).filter((e=>e))},isContainerDeleteAllowed:e=>t=>fa(e,t)},mutations:{updateUser(e,t){e.user=t},updateActiveLocation(e,t){localStorage.setItem(ca,t),e.activeLocationId=t},updateLocations(e,t){e.locations=t.sort(((e,t)=>e.name.localeCompare(t.name)))},updateContainers(e,t){e.containers=t.sort(((e,t)=>e.name.localeCompare(t.name)))},updateItems(e,t){e.items=t.sort(((e,t)=>(t.updatedAt||t.createdAt||t.name).localeCompare(e.updatedAt||e.createdAt||e.name)))},addSelectedContainerId(e,t){e.selectedContainerIds[t]=(new Date).toISOString()},setLoadingStateLoading(e){e.loadingState=ma.LOADING},setLoadingStateSuccess(e){e.loadingState=ma.SUCCESS},setLoadingStateError(e){e.loadingState=ma.ERROR},resetState(e){Object.assign(e,ga)}},actions:{async resetApp({commit:e}){pa(),await oa.KT.stop(),await oa.KT.clear(),e("resetState")},async initUser({commit:e,dispatch:t}){const a=async()=>{try{const a=await M.g.currentAuthenticatedUser();return e("updateUser",a),await t("initDatastore"),!0}catch{return!1}},n=e=>{switch(console.debug("auth event",e.payload.event),e.payload.event){case"signIn":a().then((()=>Qt.push("/")));break;case"signIn_failure":console.error("user sign in failed");break;case"signUp_failure":console.error("user sign up failed");break;case"confirmSignUp":a().then((()=>Qt.push("/")));break;case"completeNewPassword_failure":console.error("user did not complete new password flow");break;case"autoSignIn":a().then((()=>Qt.push("/")));break;case"autoSignIn_failure":console.error("auto sign in failed");break;case"forgotPassword_failure":console.error("password recovery failed");break;case"forgotPasswordSubmit_failure":console.error("password confirmation failed");break;case"tokenRefresh_failure":console.error("token refresh failed");break;case"cognitoHostedUI_failure":console.error("Cognito Hosted UI sign in failed");break;case"customState_failure":console.error("custom state failure");break;case"signOut":t("resetApp").then((()=>Qt.push({name:zt.Login})));break}};return ua.X.listen("auth",n),a()},async initDatastore({commit:e,dispatch:t,getters:a}){e("setLoadingStateLoading"),await oa.KT.clear(),await oa.KT.start(),pa(),pa=ua.X.listen("datastore",(async a=>{const{event:n}=a.payload;console.debug("datastore event",n),"ready"===n&&await t("syncLocations").then((()=>{e("setLoadingStateSuccess")})).catch((t=>{console.error(t),e("setLoadingStateError")}))}))},async syncLocations({commit:e,dispatch:t,state:a,getters:n}){const i=await oa.KT.query(da);if(e("updateLocations",i),0==i.length)throw new Error("No locations found");const o=n.location?.id||i[0].id;await t("changeLocation",o),a.locationSubscription&&a.locationSubscription.unsubscribe(),a.locationSubscription=oa.KT.observe(da).subscribe((t=>{switch(console.debug(`Location subscription ${t.opType}: ${t.element.name} - ${t.element.id}`),t.opType){case"INSERT":e("updateLocations",[...a.locations.filter((e=>e.id!==t.element.id)),t.element]);break;case"UPDATE":e("updateLocations",[...a.locations.filter((e=>e.id!==t.element.id)),t.element]);break;case"DELETE":e("updateLocations",[...a.locations.filter((e=>e.id!==t.element.id))]);break;default:console.warn("Unexpected operation type on location: "+t.opType)}}))},async changeLocation({commit:e,dispatch:t,state:a},n){if(!a.locations.find((e=>e.id===n)))throw new Error("Location not found");e("updateActiveLocation",n),await t("syncContainers"),await t("syncItems")},async syncContainers({commit:e,state:t,getters:a}){const n=Ia(a.location),i=await oa.KT.query(la,(e=>e.locationID.eq(n.id)));e("updateContainers",i),t.containerSubscription&&t.containerSubscription.unsubscribe(),t.containerSubscription=oa.KT.observe(la,(e=>e.locationID.eq(n.id))).subscribe((a=>{switch(console.debug(`Container subscription ${a.opType}: ${a.element.name} - ${a.element.id}`),a.opType){case"INSERT":e("updateContainers",[...t.containers.filter((e=>e.id!==a.element.id)),a.element]);break;case"UPDATE":e("updateContainers",[...t.containers.filter((e=>e.id!==a.element.id)),a.element]);break;case"DELETE":e("updateContainers",[...t.containers.filter((e=>e.id!==a.element.id))]);break;default:console.warn("Unexpected operation type on container: "+a.opType)}}))},async syncItems({commit:e,state:t,getters:a}){const n=Ia(a.location),i=await oa.KT.query(sa,(e=>e.locationID.eq(n.id)));e("updateItems",i),t.itemSubscription&&t.itemSubscription.unsubscribe(),t.itemSubscription=oa.KT.observe(sa,(e=>e.locationID.eq(n.id))).subscribe((a=>{switch(console.debug(`Item subscription ${a.opType}: ${a.element.name} - ${a.element.id}`),a.opType){case"INSERT":e("updateItems",[...t.items.filter((e=>e.id!==a.element.id)),a.element]);break;case"UPDATE":e("updateItems",[...t.items.filter((e=>e.id!==a.element.id)),a.element]);break;case"DELETE":e("updateItems",[...t.items.filter((e=>e.id!==a.element.id))]);break;default:console.warn("Unexpected operation type on item: "+a.opType)}}))},async addContainer({commit:e,state:t,getters:a},n){const i=Ia(a.location),o=new la({name:n.name,locationID:i.id,parentContainerID:n.parentContainerId||void 0});await oa.KT.save(o).then((()=>{e("updateContainers",[...t.containers,o])}))},async addLocation({commit:e,state:t},a){const n=new da({name:a.name});await oa.KT.save(n).then((()=>{e("updateLocations",[...t.locations,n])}))},async addItem({commit:e,state:t,getters:a},n){const i=Ia(a.location),o=new sa({name:n.name,locationID:i.id,containerID:n.containerId||void 0});await oa.KT.save(o).then((()=>{e("updateItems",[...t.items,o])}))},async updateContainer({commit:e,state:t},a){await oa.KT.query(la,a.id).then((async n=>{if(n){const i=la.copyOf(n,(e=>{e.name=a.name,e.parentContainerID=a.parentContainerId||void 0}));await oa.KT.save(i).then((()=>{e("updateContainers",[...t.containers.filter((e=>e.id!==a.id)),i])}))}}))},async updateLocation({commit:e,state:t},a){await oa.KT.query(da,a.id).then((async n=>{if(n){const i=da.copyOf(n,(e=>{e.name=a.name}));await oa.KT.save(i).then((()=>{e("updateLocations",[...t.locations.filter((e=>e.id!==a.id)),i])}))}}))},async updateItem({commit:e,state:t},a){await oa.KT.query(sa,a.id).then((async n=>{if(n){const i=sa.copyOf(n,(e=>{e.name=a.name,e.containerID=a.containerId||void 0}));await oa.KT.save(i).then((()=>{e("updateItems",[...t.items.filter((e=>e.id!==a.id)),i])}))}}))},async deleteContainer({commit:e,state:t,dispatch:a},n){const i=await oa.KT.query(la,n);if(i){if(!fa(t,n))throw new Error(`Container ${i.id} is not empty.`);const o=wa(t,n);await Promise.all(o.map((e=>a("deleteContainer",e.id)))).then((()=>oa.KT["delete"](i).then((()=>e("updateContainers",t.containers.filter((e=>e.id!==n)))))))}},async deleteItem({commit:e,state:t},a){const n=await oa.KT.query(sa,a);n&&await oa.KT["delete"](n).then((()=>e("updateItems",t.items.filter((e=>e.id!==a)))))}},modules:{}});function fa(e,t){if(!t)return!1;const a=e.items.filter((e=>e.containerID===t));if(a.length)return!1;const n=wa(e,t);return n.every((t=>fa(e,t.id)))}function wa(e,t,a=!1){const n=e.containers.filter((e=>e.parentContainerID===t));return a?ba(n):n}function va(e,t){const a=t.filter((t=>t.parentContainerID===e));return a.length?[...a,...a.flatMap((e=>va(e.id,t)))]:[]}function ya(e,t){if(!e.parentContainerID)return[];const a=t.find((t=>t.id===e.parentContainerID));return a?[...ya(a,t),a]:[]}function Ia(e){if(!e)throw new Error("Location not loaded");return e}function ba(e){if(e.length<2)return e;const t=e[0].name;let a="",n="";do{a=n,n=t.slice(0,a.length+1)}while(e.every((e=>e.name.startsWith(n)))&&n!==a);let i="",o="";do{i=o,o=e[0].name.slice(t.length-i.length-1,t.length-1)}while(e.every((e=>e.name.endsWith(o)))&&o!==i&&(a+o).length<=t.length);return e.sort(((e,t)=>{const n=e.name.slice(a.length,e.name.length-i.length),o=t.name.slice(a.length,t.name.length-i.length),r=parseInt(n),s=parseInt(o);return isNaN(r)||isNaN(s)?n.localeCompare(o):r-s}))}xt.d.configure(Ht),(0,n.ri)(ia).use(Qt).use(ha).mount("#app")},6249:function(){}},t={};function a(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(o.exports,o,o.exports,a),o.loaded=!0,o.exports}a.m=e,function(){var e=[];a.O=function(t,n,i,o){if(!n){var r=1/0;for(u=0;u<e.length;u++){n=e[u][0],i=e[u][1],o=e[u][2];for(var s=!0,l=0;l<n.length;l++)(!1&o||r>=o)&&Object.keys(a.O).every((function(e){return a.O[e](n[l])}))?n.splice(l--,1):(s=!1,o<r&&(r=o));if(s){e.splice(u--,1);var d=i();void 0!==d&&(t=d)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,i,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var i,o,r=n[0],s=n[1],l=n[2],d=0;if(r.some((function(t){return 0!==e[t]}))){for(i in s)a.o(s,i)&&(a.m[i]=s[i]);if(l)var u=l(a)}for(t&&t(n);d<r.length;d++)o=r[d],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(u)},n=self["webpackChunkwarehome"]=self["webpackChunkwarehome"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(591)}));n=a.O(n)})();
//# sourceMappingURL=app.e3e88299.js.map